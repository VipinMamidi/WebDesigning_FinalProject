{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Urvi\\\\Documents\\\\INFO6150\\\\MERN-Ecommerce\\\\MERN-Ecommerce\\\\frontend\\\\src\\\\pages\\\\LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Form, Button, InputGroup, Col, Card, FloatingLabel } from 'react-bootstrap';\nimport { loginUser } from '../actions/userActions';\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\nimport axios from 'axios';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport SocialLoginOptions from '../components/SocialLoginOptions';\nimport '../styles/login-register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LoginPage = ({\n  location,\n  history\n}) => {\n  _s();\n\n  const [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\n\n  const [showRedirectMsg, setShowRedirectMsg] = useState(false);\n  const [forgotPassword, setForgotPassword] = useState(false);\n  const [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\n\n  const [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\n\n  const [type, setType] = useState('password');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const redirect = location.search ? location.search.split('=')[1] : '';\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    loading,\n    userInfo,\n    error\n  } = userLogin;\n  const storedInfo = JSON.parse(localStorage.getItem('userInfo'));\n  useEffect(() => {\n    if (!location.search.includes('success') && userInfo) history.push(redirect);\n  }, [history, redirect, location, userInfo]);\n  useEffect(() => {\n    if (location.search.includes('login=failed')) {\n      const errorCodeQuery = location.search.split('&')[1];\n      const errorCode = errorCodeQuery.split('=')[1];\n\n      switch (errorCode) {\n        case '0':\n          setAuthFailedMsg('It looks like you had registered using a Google Account');\n          break;\n\n        case '1':\n          setAuthFailedMsg('It looks like you had registered using a Github Account');\n          break;\n\n        case '2':\n          setAuthFailedMsg('It looks like you had registered using a Twitter Account');\n          break;\n\n        case '3':\n          setAuthFailedMsg('It looks like you had registered using a LinkedIn Account');\n          break;\n\n        default:\n          return;\n      }\n    }\n  }, [location.search]); // if redirected to login page after refresh token expired, show a message\n\n  useEffect(() => {\n    const flag = localStorage.getItem('redirectLogin');\n\n    if (flag && flag === 'true') {\n      setShowRedirectMsg(true);\n    } else {\n      setShowRedirectMsg(false);\n    }\n  }, []); // if the passport social login is successful, get the user's data and store in redux store\n\n  useEffect(() => {\n    // check for url params\n    if (window.location.search.includes('success')) {\n      const queries = window.location.search.split('&');\n      const isSuccess = queries[0].split('=')[1] === 'success';\n      const id = queries[1].split('=')[1]; // if successful login\n\n      if (isSuccess) {\n        // get user data and dispatch login success\n        axios.post('/api/users/passport/data', {\n          id\n        }).then(({\n          data\n        }) => {\n          const {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar\n          } = data;\n          const userData = {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar,\n            isSocialLogin: true\n          }; // login user in frontend\n\n          dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: userData\n          }); // update the local storage\n\n          localStorage.setItem('userInfo', JSON.stringify(userData)); // remove variable that was meant to promt email verification if it is a social login\n\n          localStorage.removeItem('promptEmailVerfication');\n          history.push('/shipping'); // move to shipping page by default\n        });\n      }\n    }\n  }, [dispatch, history, redirect]);\n  useEffect(() => {\n    // if redirected from confirmation page, fill email and let user fill the password field\n    if (storedInfo && storedInfo.email && localStorage.getItem('fillEmailOnLoginPage') === 'true') {\n      localStorage.removeItem('fillEmailOnLoginPage');\n      setEmail(storedInfo.email);\n    }\n  }, [storedInfo]); // to show/hide the password field content\n\n  const showHide = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setType(type === 'password' ? 'text' : 'password');\n  }; // login user from email and password\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(loginUser(email, password));\n  }; // to send a mail for resetting password if forgotted\n\n\n  const handleEmailSubmit = async e => {\n    e.preventDefault();\n    setShowLoading(true); // send the mail to the registered user\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/users/reset', {\n      email\n    }, config);\n\n    if (data) {\n      setShowLoading(false);\n      setEmailSent(true); // store the name in localstorage\n\n      localStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\n    }\n  }; // there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\n\n\n  if (!forgotPassword) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: [authFailedMsg && /*#__PURE__*/_jsxDEV(Message, {\n          variant: \"danger\",\n          dismissible: true,\n          children: authFailedMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)'\n              },\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              onClick: () => history.push('/register'),\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 7\n          }, this), error && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"danger\",\n            duration: 10,\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 8\n          }, this), showRedirectMsg && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"info\",\n            duration: 10,\n            children: \"Your session has expired. Please login again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 8\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"email\",\n                children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                  controlId: \"emailinput\",\n                  label: \"Email address\",\n                  className: \"mb-3\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    required: true,\n                    size: \"lg\",\n                    placeholder: \"Enter Email Address\",\n                    type: \"email\",\n                    value: email,\n                    onChange: e => setEmail(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                  children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                    controlId: \"passwordinput\",\n                    label: \"Password\",\n                    style: {\n                      display: 'flex',\n                      width: '100%'\n                    },\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      size: \"lg\",\n                      type: type,\n                      placeholder: \"Enter your password\",\n                      value: password,\n                      style: {\n                        borderRight: 'none'\n                      },\n                      onChange: e => setPassword(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group-append\",\n                      children: /*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                        onClick: showHide,\n                        style: {\n                          fontSize: '1rem',\n                          height: '100%',\n                          marginLeft: '-0.5em',\n                          background: 'transparent',\n                          borderLeft: 'none'\n                        },\n                        children: type === 'text' ? /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye-slash\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 16\n                        }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 16\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                style: {\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  variant: \"link\",\n                  style: {\n                    marginTop: '-1em',\n                    padding: '0'\n                  },\n                  onClick: () => setForgotPassword(true),\n                  children: \"Forgot Password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  className: \"ms-auto\",\n                  style: {\n                    padding: '0.5em 1em',\n                    width: '8rem'\n                  },\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                cursor: 'default'\n              },\n              children: \"Reset Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this), showLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 8\n          }, this) : emailSent ? /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              className: \"pl-0\",\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: \"Email Sent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \"Please use the link sent to your email and reset your password right away!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: handleEmailSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              controlId: \"email\",\n              children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                controlId: \"emailinput\",\n                label: \"Email address\",\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  size: \"lg\",\n                  placeholder: \"Enter Email Address\",\n                  type: \"email\",\n                  value: email,\n                  onChange: e => setEmail(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              style: {\n                display: 'flex'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                variant: \"link\",\n                className: \"remember-password\",\n                style: {\n                  marginTop: '-1em',\n                  padding: '0'\n                },\n                onClick: () => setForgotPassword(false),\n                children: \"I remember my password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                className: \"ms-auto\",\n                style: {\n                  padding: '0.5em 1em',\n                  width: '8rem'\n                },\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(LoginPage, \"8wQiw60iaC+qUzBVFA/uiCJodMk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["C:/Users/Urvi/Documents/INFO6150/MERN-Ecommerce/MERN-Ecommerce/frontend/src/pages/LoginPage.js"],"names":["React","useState","useEffect","useSelector","useDispatch","Form","Button","InputGroup","Col","Card","FloatingLabel","loginUser","USER_LOGIN_SUCCESS","axios","Loader","Message","FormContainer","SocialLoginOptions","LoginPage","location","history","authFailedMsg","setAuthFailedMsg","showRedirectMsg","setShowRedirectMsg","forgotPassword","setForgotPassword","showLoading","setShowLoading","emailSent","setEmailSent","type","setType","email","setEmail","password","setPassword","dispatch","redirect","search","split","userLogin","state","loading","userInfo","error","storedInfo","JSON","parse","localStorage","getItem","includes","push","errorCodeQuery","errorCode","flag","window","queries","isSuccess","id","post","then","data","name","isAdmin","isConfirmed","avatar","userData","isSocialLogin","payload","setItem","stringify","removeItem","showHide","e","preventDefault","stopPropagation","handleSubmit","handleEmailSubmit","config","headers","background","boxShadow","WebkitBoxShadow","MozBoxShadow","target","value","display","width","borderRight","fontSize","height","marginLeft","borderLeft","marginTop","padding","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tCol,\r\n\tCard,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport { loginUser } from '../actions/userActions';\r\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport SocialLoginOptions from '../components/SocialLoginOptions';\r\nimport '../styles/login-register.css';\r\n\r\nconst LoginPage = ({ location, history }) => {\r\n\tconst [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\r\n\tconst [showRedirectMsg, setShowRedirectMsg] = useState(false);\r\n\tconst [forgotPassword, setForgotPassword] = useState(false);\r\n\tconst [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\r\n\tconst [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\r\n\r\n\tconst [type, setType] = useState('password');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { loading, userInfo, error } = userLogin;\r\n\tconst storedInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!location.search.includes('success') && userInfo)\r\n\t\t\thistory.push(redirect);\r\n\t}, [history, redirect, location, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.search.includes('login=failed')) {\r\n\t\t\tconst errorCodeQuery = location.search.split('&')[1];\r\n\t\t\tconst errorCode = errorCodeQuery.split('=')[1];\r\n\t\t\tswitch (errorCode) {\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Google Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '1':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Github Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '2':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Twitter Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '3':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a LinkedIn Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [location.search]);\r\n\r\n\t// if redirected to login page after refresh token expired, show a message\r\n\tuseEffect(() => {\r\n\t\tconst flag = localStorage.getItem('redirectLogin');\r\n\t\tif (flag && flag === 'true') {\r\n\t\t\tsetShowRedirectMsg(true);\r\n\t\t} else {\r\n\t\t\tsetShowRedirectMsg(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// if the passport social login is successful, get the user's data and store in redux store\r\n\tuseEffect(() => {\r\n\t\t// check for url params\r\n\t\tif (window.location.search.includes('success')) {\r\n\t\t\tconst queries = window.location.search.split('&');\r\n\t\t\tconst isSuccess = queries[0].split('=')[1] === 'success';\r\n\t\t\tconst id = queries[1].split('=')[1];\r\n\r\n\t\t\t// if successful login\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t// get user data and dispatch login success\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/api/users/passport/data', {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t} = data;\r\n\t\t\t\t\t\tconst userData = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t\tisSocialLogin: true,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// login user in frontend\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\t\t\t\tpayload: userData,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// update the local storage\r\n\t\t\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\t\t\t'userInfo',\r\n\t\t\t\t\t\t\tJSON.stringify(userData)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// remove variable that was meant to promt email verification if it is a social login\r\n\t\t\t\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\t\t\t\thistory.push('/shipping'); // move to shipping page by default\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}, [dispatch, history, redirect]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if redirected from confirmation page, fill email and let user fill the password field\r\n\t\tif (\r\n\t\t\tstoredInfo &&\r\n\t\t\tstoredInfo.email &&\r\n\t\t\tlocalStorage.getItem('fillEmailOnLoginPage') === 'true'\r\n\t\t) {\r\n\t\t\tlocalStorage.removeItem('fillEmailOnLoginPage');\r\n\t\t\tsetEmail(storedInfo.email);\r\n\t\t}\r\n\t}, [storedInfo]);\r\n\r\n\t// to show/hide the password field content\r\n\tconst showHide = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetType(type === 'password' ? 'text' : 'password');\r\n\t};\r\n\r\n\t// login user from email and password\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(loginUser(email, password));\r\n\t};\r\n\r\n\t// to send a mail for resetting password if forgotted\r\n\tconst handleEmailSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetShowLoading(true);\r\n\r\n\t\t// send the mail to the registered user\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/reset',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tsetShowLoading(false);\r\n\t\t\tsetEmailSent(true);\r\n\t\t\t// store the name in localstorage\r\n\t\t\tlocalStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\r\n\t\t}\r\n\t};\r\n\r\n\t// there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\r\n\tif (!forgotPassword) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t{/* if passport login has failed because user logged in with differrent social account, shoe the error msg */}\r\n\t\t\t\t\t{authFailedMsg && (\r\n\t\t\t\t\t\t<Message variant='danger' dismissible>\r\n\t\t\t\t\t\t\t{authFailedMsg}\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h1 onClick={() => history.push('/register')}>\r\n\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* the message when refresh token has expired */}\r\n\t\t\t\t\t\t{showRedirectMsg && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='info' duration={10}>\r\n\t\t\t\t\t\t\t\tYour session has expired. Please login again.\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={showHide}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showLoading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : emailSent ? (\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<Card.Body className='pl-0'>\r\n\t\t\t\t\t\t\t\t\t<Card.Title>Email Sent</Card.Title>\r\n\t\t\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t\t\tPlease use the link sent to your email\r\n\t\t\t\t\t\t\t\t\t\tand reset your password right away!\r\n\t\t\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleEmailSubmit}>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\tclassName='remember-password'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(false)\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\tI remember my password\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}