{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Button,Row,Col,ListGroup,Image,Card}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import CheckoutStatus from\"../components/CheckoutStatus\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import{createOrder}from\"../actions/orderActions\";import{CART_RESET}from\"../constants/cartConstants\";import{refreshLogin,getUserDetails}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PlaceOrderPage=function PlaceOrderPage(_ref){var history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems,shippingAddress=cart.shippingAddress,paymentMethod=cart.paymentMethod;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDetails=useSelector(function(state){return state.userDetails;});var userLoginError=userDetails.error;// fetch the userinfo from reducx store\nuseEffect(function(){userInfo?userInfo.isSocialLogin?dispatch(getUserDetails(userInfo.id)):dispatch(getUserDetails(\"profile\")):dispatch(getUserDetails(\"profile\"));},[userInfo,dispatch]);// refresh access token when user detail throws error\nuseEffect(function(){if(userLoginError&&userInfo&&!userInfo.isSocialLogin){var user=JSON.parse(localStorage.getItem(\"userInfo\"));user&&dispatch(refreshLogin(user.email));}},[userLoginError,dispatch,userInfo]);useEffect(function(){if(success){localStorage.removeItem(\"cartItems\");dispatch({type:CART_RESET,payload:shippingAddress});// remove items from cart once paid, but keep the shipping address in store\nhistory.push(\"/order/\".concat(order._id));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[success,history]);// All prices, tax is randomly  assigned\ncart.itemsPrice=cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0);cart.shippingPrice=cart.itemsPrice>100?40:20;cart.taxPrice=0.18*cart.itemsPrice;cart.totalPrice=cart.itemsPrice+cart.taxPrice+cart.shippingPrice;var handleOrder=function handleOrder(e){e.preventDefault();dispatch(createOrder({orderItems:cartItems,shippingAddress:shippingAddress,paymentMethod:paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckoutStatus,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsx(Row,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",shippingAddress.address,\",\",\" \",shippingAddress.city,\"-\",shippingAddress.postalCode,\",\",\" \",shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method: \"}),\" \",paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cart Items\"}),cartItems.length!==0?/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item,idx){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{className:\"product-image\",src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" x \",item.price,\" =\",\" \",(item.qty*item.price).toLocaleString(\"en-US\",{maximumFractionDigits:2,style:\"currency\",currency:\"USD\"})]})]})},idx);})}):/*#__PURE__*/_jsx(Message,{children:\"Your cart is empty\"})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Subtotal\"})}),/*#__PURE__*/_jsx(Col,{children:Number(cart.itemsPrice).toLocaleString(\"en-US\",{maximumFractionDigits:2,style:\"currency\",currency:\"USD\"})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping\"})}),/*#__PURE__*/_jsx(Col,{children:Number(cart.shippingPrice).toLocaleString(\"en-US\",{maximumFractionDigits:2,style:\"currency\",currency:\"USD\"})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Tax\"})}),/*#__PURE__*/_jsx(Col,{children:Number(cart.taxPrice).toLocaleString(\"en-US\",{maximumFractionDigits:2,style:\"currency\",currency:\"USD\"})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total\"})}),/*#__PURE__*/_jsx(Col,{children:Number(cart.totalPrice).toLocaleString(\"en-US\",{maximumFractionDigits:2,style:\"currency\",currency:\"USD\"})})]})}),error&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Message,{dismissible:true,variant:\"danger\",duration:10,children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",size:\"lg\",disabled:!cartItems.length,onClick:handleOrder,children:\"Place Order\"})})]})})})]})})]});};export default PlaceOrderPage;","map":{"version":3,"sources":["/Users/riddhibhatti/Webdesign/WebDFinalProject/WebDesigning_FinalProject/TheStyleStudio/frontend/src/pages/PlaceOrderPage.js"],"names":["React","useEffect","useDispatch","useSelector","Button","Row","Col","ListGroup","Image","Card","Link","CheckoutStatus","Message","Loader","createOrder","CART_RESET","refreshLogin","getUserDetails","PlaceOrderPage","history","dispatch","cart","state","cartItems","shippingAddress","paymentMethod","orderCreate","order","loading","success","error","userLogin","userInfo","userDetails","userLoginError","isSocialLogin","id","user","JSON","parse","localStorage","getItem","email","removeItem","type","payload","push","_id","itemsPrice","reduce","acc","item","price","qty","shippingPrice","taxPrice","totalPrice","handleOrder","e","preventDefault","orderItems","address","city","postalCode","country","length","map","idx","image","name","product","toLocaleString","maximumFractionDigits","style","currency","Number"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Row, Col, ListGroup, Image, Card } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CheckoutStatus from \"../components/CheckoutStatus\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport { createOrder } from \"../actions/orderActions\";\r\nimport { CART_RESET } from \"../constants/cartConstants\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\n\r\nconst PlaceOrderPage = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems, shippingAddress, paymentMethod } = cart;\r\n\r\n  const orderCreate = useSelector((state) => state.orderCreate);\r\n  const { order, loading, success, error } = orderCreate;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  // fetch the userinfo from reducx store\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // refresh access token when user detail throws error\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      localStorage.removeItem(\"cartItems\");\r\n      dispatch({ type: CART_RESET, payload: shippingAddress }); // remove items from cart once paid, but keep the shipping address in store\r\n      history.push(`/order/${order._id}`);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [success, history]);\r\n\r\n  // All prices, tax is randomly  assigned\r\n  cart.itemsPrice = cartItems.reduce(\r\n    (acc, item) => acc + item.price * item.qty,\r\n    0\r\n  );\r\n\r\n  cart.shippingPrice = cart.itemsPrice > 100 ? 40 : 20;\r\n  cart.taxPrice = 0.18 * cart.itemsPrice;\r\n  cart.totalPrice = cart.itemsPrice + cart.taxPrice + cart.shippingPrice;\r\n\r\n  const handleOrder = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      createOrder({\r\n        orderItems: cartItems,\r\n        shippingAddress,\r\n        paymentMethod,\r\n        itemsPrice: cart.itemsPrice,\r\n        shippingPrice: cart.shippingPrice,\r\n        taxPrice: cart.taxPrice,\r\n        totalPrice: cart.totalPrice,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* last step in the ckecout process */}\r\n      <CheckoutStatus step1 step2 step3 step4 />\r\n      <Row>\r\n        {loading ? (\r\n          <Loader />\r\n        ) : (\r\n          <>\r\n            <Col md={8}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>Shipping</h2>\r\n                  <p>\r\n                    <strong>Address: </strong> {shippingAddress.address},{\" \"}\r\n                    {shippingAddress.city}-{shippingAddress.postalCode},{\" \"}\r\n                    {shippingAddress.country}\r\n                  </p>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Payment Method</h2>\r\n                  <p>\r\n                    <strong>Method: </strong> {paymentMethod}\r\n                  </p>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Cart Items</h2>\r\n                  {cartItems.length !== 0 ? (\r\n                    <ListGroup variant=\"flush\">\r\n                      {cartItems.map((item, idx) => (\r\n                        <ListGroup.Item key={idx}>\r\n                          <Row>\r\n                            <Col md={2}>\r\n                              <Image\r\n                                className=\"product-image\"\r\n                                src={item.image}\r\n                                alt={item.name}\r\n                                fluid\r\n                                rounded\r\n                              />\r\n                            </Col>\r\n                            <Col>\r\n                              <Link to={`/product/${item.product}`}>\r\n                                {item.name}\r\n                              </Link>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                              {item.qty} x {item.price} ={\" \"}\r\n                              {(item.qty * item.price).toLocaleString(\"en-US\", {\r\n                                maximumFractionDigits: 2,\r\n                                style: \"currency\",\r\n                                currency: \"USD\",\r\n                              })}\r\n                            </Col>\r\n                          </Row>\r\n                        </ListGroup.Item>\r\n                      ))}\r\n                    </ListGroup>\r\n                  ) : (\r\n                    <Message>Your cart is empty</Message>\r\n                  )}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item className=\"text-center\">\r\n                    <h2 className=\"text-center\">Order Summary</h2>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Subtotal</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.itemsPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Shipping</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.shippingPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Tax</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.taxPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Total</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.totalPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  {error && (\r\n                    <ListGroup.Item>\r\n                      <Message dismissible variant=\"danger\" duration={10}>\r\n                        {error}\r\n                      </Message>\r\n                    </ListGroup.Item>\r\n                  )}\r\n                  <ListGroup.Item className=\"d-grid gap-2\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      size=\"lg\"\r\n                      disabled={!cartItems.length}\r\n                      onClick={handleOrder}\r\n                    >\r\n                      Place Order\r\n                    </Button>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </>\r\n        )}\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PlaceOrderPage;\r\n"]},"metadata":{},"sourceType":"module"}