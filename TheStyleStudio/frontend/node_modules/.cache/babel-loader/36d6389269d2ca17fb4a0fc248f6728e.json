{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Urvi\\\\Documents\\\\INFO6150\\\\MERN-Ecommerce\\\\MERN-Ecommerce\\\\frontend\\\\src\\\\pages\\\\ConfirmPage.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Card } from 'react-bootstrap';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport { confirmUser } from '../actions/userActions';\nimport Meta from '../components/Meta';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ConfirmPage = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const userConfirm = useSelector(state => state.userConfirm); // get the userInfo to check if user is confirmed or not\n\n  const {\n    loading,\n    error,\n    isConfirmed\n  } = userConfirm;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  useEffect(() => {\n    if (userInfo) {\n      setIsLoggedIn(true);\n    } else {\n      setIsLoggedIn(false);\n    }\n  }, []);\n  useEffect(() => {\n    // confirm user once the email token is available\n    dispatch(confirmUser(match.params.token, isLoggedIn));\n  }, [dispatch, match, isLoggedIn]);\n\n  if (loading || !isConfirmed && !error) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 10\n    }, this);\n  } else if (error) {\n    // redirect to login page after a 10 seconds\n    setTimeout(() => {\n      history.push('/login');\n    }, 10000);\n    return /*#__PURE__*/_jsxDEV(Message, {\n      dismissible: true,\n      variant: \"danger\",\n      duration: 10,\n      children: \"Verfication Failed. Please try to login again.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }, this);\n  } else if (isConfirmed) {\n    // set a variable in local storage to fill email aftrer redirecting to login page after email confirmation\n    localStorage.setItem('fillEmailOnLoginPage', 'true');\n    return /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        border: 'none',\n        margin: '0 auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Meta, {\n        title: \"Confirm Password | Kosells\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"Account Confirmed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: setIsLoggedIn ? 'Your account has been successfully verified! Go on and shop for the best deals of the day!' : `Your account has been successfully verified! Please\n\t\t\t\t\t\tlogin and start exploring the best deals on all your\n\t\t\t\t\t\tfavorite products.`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this), !setIsLoggedIn ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 24\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this);\n  }\n};\n\n_s(ConfirmPage, \"fC5xXvy+swmGZ3y+bz0FSAl7hRM=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = ConfirmPage;\nexport default ConfirmPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfirmPage\");","map":{"version":3,"sources":["C:/Users/Urvi/Documents/INFO6150/MERN-Ecommerce/MERN-Ecommerce/frontend/src/pages/ConfirmPage.js"],"names":["React","useState","useEffect","useSelector","useDispatch","Link","Card","Loader","Message","confirmUser","Meta","ConfirmPage","match","history","dispatch","userConfirm","state","loading","error","isConfirmed","userLogin","userInfo","isLoggedIn","setIsLoggedIn","params","token","setTimeout","push","localStorage","setItem","border","margin"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Card } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { confirmUser } from '../actions/userActions';\r\nimport Meta from '../components/Meta';\r\n\r\nconst ConfirmPage = ({ match, history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst userConfirm = useSelector((state) => state.userConfirm); // get the userInfo to check if user is confirmed or not\r\n\tconst { loading, error, isConfirmed } = userConfirm;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo) {\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t} else {\r\n\t\t\tsetIsLoggedIn(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\t// confirm user once the email token is available\r\n\t\tdispatch(confirmUser(match.params.token, isLoggedIn));\r\n\t}, [dispatch, match, isLoggedIn]);\r\n\r\n\tif (loading || (!isConfirmed && !error)) {\r\n\t\treturn <Loader />;\r\n\t} else if (error) {\r\n\t\t// redirect to login page after a 10 seconds\r\n\t\tsetTimeout(() => {\r\n\t\t\thistory.push('/login');\r\n\t\t}, 10000);\r\n\t\treturn (\r\n\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\tVerfication Failed. Please try to login again.\r\n\t\t\t</Message>\r\n\t\t);\r\n\t} else if (isConfirmed) {\r\n\t\t// set a variable in local storage to fill email aftrer redirecting to login page after email confirmation\r\n\t\tlocalStorage.setItem('fillEmailOnLoginPage', 'true');\r\n\t\treturn (\r\n\t\t\t<Card style={{ border: 'none', margin: '0 auto' }}>\r\n\t\t\t\t<Meta title='Confirm Password | Kosells' />\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<Card.Title>Account Confirmed</Card.Title>\r\n\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t{setIsLoggedIn\r\n\t\t\t\t\t\t\t? 'Your account has been successfully verified! Go on and shop for the best deals of the day!'\r\n\t\t\t\t\t\t\t: `Your account has been successfully verified! Please\r\n\t\t\t\t\t\tlogin and start exploring the best deals on all your\r\n\t\t\t\t\t\tfavorite products.`}\r\n\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t{!setIsLoggedIn ? <Link to='/login'>Login</Link> : null}\r\n\t\t\t\t</Card.Body>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default ConfirmPage;\r\n"]},"metadata":{},"sourceType":"module"}